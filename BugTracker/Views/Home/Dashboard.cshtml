
@{
    ViewBag.Title = "Dashboard";
}

<h2>Excuse our mess - this project is still in progress.</h2>
<div class="row">
    <div class="col-md-8">
        <div class="row">
            <!-- projects-->
            <div class="col-md-6">
                <div class="box-info warning">
                    <div class="icon-box">
                        <span class="fa-stack">
                            <i class="fa fa-circle fa-stack-2x text-white"></i>
                            <i class="fa fa-puzzle-piece fa-stack-1x warning"></i>
                        </span>
                    </div>
                    <div class="text-box">
                        @*<h3>@Model.CurrentProjects.Count</h3>*@
                        <p>Current Projects</p>
                    </div>
                    <div class="clear"></div>
                </div>
            </div>
            <!-- tickets -->
            <div class="col-md-6">
                <div class="box-info warning">
                    <div class="icon-box">
                        <span class="fa-stack">
                            <i class="fa fa-circle fa-stack-2x text-white"></i>
                            <i class="fa fa-ticket fa-stack-1x warning"></i>
                        </span>
                    </div>
                    <div class="text-box">
                        @*<h3>@Model.CurrentTickets.Count</h3>*@
                        <p>Current Tickets</p>
                    </div>
                    <div class="clear"></div>
                </div>
            </div>
        </div>
        <div class="box-info shadow">
            <div class="row">
                <!-- priority donut -->
                <div class="col-md-4">
                    <h2>Tickets By Priority</h2>
                    <div id="ticketsByPriority" class="box-content">
                        <p>Chart comparing open tickets by priority level</p>
                    </div>
                </div>
                <!--action donut-->
                <div class="col-md-4">
                    <h2>Tickets By Type</h2>
                    <div id="ticketByAction" class="box-content">
                        <p>Chart comparing open tickets by type of work needed</p>
                    </div>
                </div>
                <!--phase donut-->
                <div class="col-md-4">
                    <h2>Tickets By Phase</h2>
                    <div id="ticketsByPhase" class="box-content">
                        <p>Chart comparing open tickets by the stage of developmment</p>
                    </div>
                </div>
            </div>
        </div>
        <!--UNASSIGNED TICKETS-->
        <div class="row">
            <div class="col-md-12">
                <div id="unassigned" class="box-info shadow">
                    <h2><strong>Unassigned</strong> Tickets</h2>
                    <div class="box-content">
                        <table id="unassignedTickets" class="data-table-xl hover table-striped compact">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Project</th>
                                    <th>Submitted By</th>
                                    <th>On</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                @*@foreach (var ticket in Model.UnassignedTickets)
                                    {
                                        <tr>
                                            <td>@ticket.Name</td>
                                            @if (ticket.Project == null)
                                            {
                                                <td>unassigned</td>}
                                            else
                                            {
                                                <td>@ticket.Project.Name</td> }
                                            @if (ticket.AssignedToId == null)
                                            {
                                                <td>unassigned</td> }
                                            else
                                            {
                                                <td>@ticket.AssignedTo.FullName</td> }
                                            @if (ticket.Priority == null)
                                            {
                                                <td>unassigned</td> }
                                            else
                                            {
                                                <td>@ticket.Priority.Name</td> }
                                            @if (ticket.Status == null)
                                            {
                                                <td>unassigned</td> }
                                            else
                                            {
                                                <td>@ticket.Status.Name</td> }
                                            @if (ticket.Action == null)
                                            {
                                                <td>unassigned</td> }
                                            else
                                            {
                                                <td>@ticket.Action.Name</td> }
                                            @if (ticket.Phase == null)
                                            {
                                                <td>unassigned</td> }
                                            else
                                            {
                                                <td>@ticket.Phase.Name</td> }
                                            <td>@ticket.Submitter.FullName</td>
                                            <td>@ticket.Submitted.FormatDateTimeOffsetCondensed()</td>
                                            <td>
                                                <a href=@Url.Action("Details", "Tickets", new { id = ticket.Id }) class="btn btn-xs btn-warning"><i class="fa fa-eye"></i></a>
                                                <a href=@Url.Action("Edit", "Tickets", new { id = ticket.Id }) class="btn btn-xs btn-warning"><i class="fa fa-edit"></i></a>
                                                <a href=@Url.Action("Create", "Attachments", new { id = ticket.Id }) class="btn btn-xs btn-warning"><i class="fa fa-flip-horizontal fa-paperclip"></i></a>
                                            </td>
                                        </tr>
                                    }*@
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- counts -->
    <div class="col-md-4">
        <!-- comments -->
        <div class="box-info">
            <h2>Recent Comments</h2>
            @*@foreach (var ticket in Model.Tickets)
                {
                    foreach (var comment in ticket.RecentComments)
                    {
                        <h6>Ticket: @ticket.Name</h6>
                        <p><strong>@comment.Submitter.FullName</strong></p>
                        <p>@comment.Body</p>
                        <p>@comment.Submitted</p>
                    }
                }*@
        </div>
        <!--attachments-->
        <div class="box-info">
            <h2>Recent Attachments</h2>
            <div class="box-content">
                @*@foreach (var attach in Model.RecentAttachments)
                    {
                            <h6>Ticket: @attach.Ticket.Name</h6>
                            <p>@attach.Title</p>
                            <p>@attach.FilePath</p>
                            <p><strong>@attach.Submitter.FullName</strong></p>
                            <p>@attach.Submitted</p>
                    }*@
            </div>
        </div>
        <div class="box-info">
            <h2>Recently Resolved</h2>
            <div class="box-content">
                <dl>
                    @*@foreach (var resolved in Model.ResolvedTickets)
                    {
                        <dt>@resolved.Project.Name</dt>
                        <dd>
                            @resolved.Name
                            <a href=@Url.Action("Details", "Tickets", new { id = resolved.Id }) class="btn btn-warning btn-xs"><i class="fa fa-eye"></i></a>
                        </dd>
                    }*@
                </dl>
            </div>
        </div>
    </div>
</div>

